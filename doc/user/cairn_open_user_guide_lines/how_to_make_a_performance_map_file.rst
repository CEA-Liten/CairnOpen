.. _cairn_map_file:

Performance maps
------------------------------------

.. raw:: html
   
   <style> 
    table.table1 th {background-color: #2d666e ; color: white}
   </style>


A performance map is used to model a law containing several variables (2 to 3) where behaviors are not linear 
:math:`z=f(x,y)\, where\, f\, is\, not\, linear`.

MIPModeler contains functions that allows to linearize non-linear behaviours in the models. 
This functionality should be used only if necessary because it can increase a lot the time of resolution.

|

.. important:: 
    - **Note that it’s not possible to optimize the size and to use the performance map for the same component in a MILP**.
      Instead, you can run a case with the best performance and the worst one to have the dimensions for the “extreme” cases
      and run a sensitivity in this range with the performance map activated.
      The user can choose to build a map to model the function f.
      The file may be generated by the Graphical User Interface (CS Datafiles tab in the Model Inspector), or can be written “by hand”.

.. caution:: 
	- All |csv| |cairn| files are with the semicolumn (";") separator.

.. seealso:: 
	#. :ref:`cairn_timeseriesfile`

Two ways can be used to model the performance map with |cairn|.

1. The first way is to give the **model.z columns (n*m rows, 6 here)** function of the **model.x (n rows, 3 here)** and **model.y (m rows, 2 here)** columns,
#. The second way is to give the **model.z columns (n*m rows, 6 here)** function of the **model.x(r=n)** and **model.y(c=m)** columns.

.. csv-table:: Default |cairn| performance map file
	:file: perf.csv
	:header-rows: 1
	:delim: ;
	:widths: 5 5 5 5 5
	:name: perfo
	:align: center
	:class: table1


.. caution:: 
	- The name of the parameters **model.z**, **model.x** and **model.y** are imposed by the component type.
	- The syntaxes **model.x(r=n)** and **model.x(c=m)** are compulsory.
	- Use ";" as a delimiter.

Here is an example of such a file in the case of the performance map for the |cop| of a HeatPump.
The |cop| of the heatpump is given as given in equation :eq:`fcos` where :math:`T_{cold},T_{hot}` are the cold and hot temperatures.

.. math::
   \begin{cases} 
   z&=& f(x,y) \\
   COP &=& f(T_{cold},T_{hot}) \\
   \end{cases}
   :label: fcos

|   
   
In the following example, the |cop| is modelled by 2 values for x and 2 values for y and 4 z (|cop|) values are evaluated using the map.

.. csv-table:: |cairn| performance map file
	:file: HeatPump_perf.csv
	:header-rows: 1
	:delim: ;
	:widths: 5 5 5 5 5 5
	:name: HeatPump_perf
	:align: center
	:class: table1




